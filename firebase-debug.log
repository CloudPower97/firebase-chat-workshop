[debug] [2025-09-24T14:57:01.718Z] ----------------------------------------------------------------------
[debug] [2025-09-24T14:57:01.720Z] Command:       /Users/giacomolanzi/.nvm/versions/node/v20.16.0/bin/node /Users/giacomolanzi/workspace/firebase-chat-workshop/node_modules/.bin/firebase emulators:start --only firestore,database,auth,ui,storage,functions
[debug] [2025-09-24T14:57:01.720Z] CLI Version:   14.17.0
[debug] [2025-09-24T14:57:01.720Z] Platform:      darwin
[debug] [2025-09-24T14:57:01.720Z] Node Version:  v20.16.0
[debug] [2025-09-24T14:57:01.720Z] Time:          Wed Sep 24 2025 16:57:01 GMT+0200 (Central European Summer Time)
[debug] [2025-09-24T14:57:01.720Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-09-24T14:57:01.803Z] Object "" in "firebase.json" has unknown property: {"additionalProperty":"scripts"}
[debug] [2025-09-24T14:57:01.945Z] openjdk version "17.0.14" 2025-01-21 LTS

[debug] [2025-09-24T14:57:01.945Z] OpenJDK Runtime Environment Corretto-17.0.14.7.1 (build 17.0.14+7-LTS)
OpenJDK 64-Bit Server VM Corretto-17.0.14.7.1 (build 17.0.14+7-LTS, mixed mode, sharing)

[debug] [2025-09-24T14:57:01.948Z] Parsed Java major version: 17
[info] i  emulators: Starting emulators: auth, functions, firestore, database, storage {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: auth, functions, firestore, database, storage"}}
[info] i  emulators: Detected demo project ID "demo-chat", emulated services will use a demo configuration and attempts to access non-emulated services for this project will fail. {"metadata":{"emulator":{"name":"hub"},"message":"Detected demo project ID \"demo-chat\", emulated services will use a demo configuration and attempts to access non-emulated services for this project will fail."}}
[warn] ⚠  ui: Not starting the ui emulator, make sure you have run firebase init. {"metadata":{"emulator":{"name":"ui"},"message":"Not starting the \u001b[1mui\u001b[22m emulator, make sure you have run \u001b[1mfirebase init\u001b[22m."}}
[debug] [2025-09-24T14:57:02.526Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-09-24T14:57:02.526Z] assigned listening specs for emulators {"user":{"ui":[{"address":"0.0.0.0","family":"IPv4","port":4001}],"auth":[{"address":"0.0.0.0","family":"IPv4","port":9099}],"firestore":[{"address":"0.0.0.0","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"0.0.0.0","family":"IPv4","port":9150}],"database":[{"address":"0.0.0.0","family":"IPv4","port":9000}],"storage":[{"address":"0.0.0.0","family":"IPv4","port":9199}],"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2025-09-24T14:57:02.528Z] Emulator locator file path: /var/folders/t5/fly5m1p125737lfdwg686b0h0000gn/T/hub-demo-chat.json
[debug] [2025-09-24T14:57:02.528Z] [hub] writing locator at /var/folders/t5/fly5m1p125737lfdwg686b0h0000gn/T/hub-demo-chat.json
[debug] [2025-09-24T14:57:02.828Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-09-24T14:57:02.828Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-09-24T14:57:02.828Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-09-24T14:57:02.828Z] late-assigned ports for functions and eventarc emulators {"user":{"ui":[{"address":"0.0.0.0","family":"IPv4","port":4001}],"auth":[{"address":"0.0.0.0","family":"IPv4","port":9099}],"firestore":[{"address":"0.0.0.0","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"0.0.0.0","family":"IPv4","port":9150}],"database":[{"address":"0.0.0.0","family":"IPv4","port":9000}],"storage":[{"address":"0.0.0.0","family":"IPv4","port":9199}],"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[debug] [2025-09-24T14:57:02.836Z] defaultcredentials: writing to file /Users/giacomolanzi/.config/firebase/g_lanzi_addiction.it_application_default_credentials.json
[debug] [2025-09-24T14:57:02.837Z] Setting GAC to /Users/giacomolanzi/.config/firebase/g_lanzi_addiction.it_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/giacomolanzi/.config/firebase/g_lanzi_addiction.it_application_default_credentials.json"}}
[debug] [2025-09-24T14:57:02.840Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2025-09-24T14:57:02.840Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2025-09-24T14:57:02.840Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","/Users/giacomolanzi/.cache/firebase/emulators/cloud-firestore-emulator-v1.19.8.jar","--host","0.0.0.0","--port",8080,"--websocket_port",9150,"--project_id","demo-chat","--rules","/Users/giacomolanzi/workspace/firebase-chat-workshop/firestore.rules","--single_project_mode",true,"--functions_emulator","127.0.0.1:5001"],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false,"shell":false,"port":8080} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"/Users/giacomolanzi/.cache/firebase/emulators/cloud-firestore-emulator-v1.19.8.jar\",\"--host\",\"0.0.0.0\",\"--port\",8080,\"--websocket_port\",9150,\"--project_id\",\"demo-chat\",\"--rules\",\"/Users/giacomolanzi/workspace/firebase-chat-workshop/firestore.rules\",\"--single_project_mode\",true,\"--functions_emulator\",\"127.0.0.1:5001\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false,\"shell\":false,\"port\":8080}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[debug] [2025-09-24T14:57:03.445Z] Sep 24, 2025 4:57:03 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start
INFO: Started WebSocket server on ws://0.0.0.0:9150
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:57:03 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start\nINFO: Started WebSocket server on ws://0.0.0.0:9150\n"}}
[debug] [2025-09-24T14:57:03.455Z] API endpoint: http:// {"metadata":{"emulator":{"name":"firestore"},"message":"API endpoint: http://"}}
[debug] [2025-09-24T14:57:03.456Z] 0.0.0.0:8080
If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:

   export FIRESTORE_EMULATOR_HOST=0.0.0.0:8080

If you are running a Firestore in Datastore Mode project, run:

   export DATASTORE_EMULATOR_HOST=0.0.0.0:8080

Note: Support for Datastore Mode is in preview. If you encounter any bugs please file at https://github.com/firebase/firebase-tools/issues.
Dev App Server is now running.

 {"metadata":{"emulator":{"name":"firestore"},"message":"0.0.0.0:8080\nIf you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:\n\n   export FIRESTORE_EMULATOR_HOST=0.0.0.0:8080\n\nIf you are running a Firestore in Datastore Mode project, run:\n\n   export DATASTORE_EMULATOR_HOST=0.0.0.0:8080\n\nNote: Support for Datastore Mode is in preview. If you encounter any bugs please file at https://github.com/firebase/firebase-tools/issues.\nDev App Server is now running.\n\n"}}
[info] ✔  firestore: Firestore Emulator UI websocket is running on 9150. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9150."}}
[debug] [2025-09-24T14:57:03.651Z] Checked if tokens are valid: true, expires at: 1758726922499
[debug] [2025-09-24T14:57:03.651Z] Checked if tokens are valid: true, expires at: 1758726922499
[debug] [2025-09-24T14:57:03.651Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/demo-chat [none]
[debug] [2025-09-24T14:57:04.045Z] Sep 24, 2025 4:57:04 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:57:04 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2025-09-24T14:57:04.211Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/demo-chat 403
[debug] [2025-09-24T14:57:04.211Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/demo-chat {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2025-09-24T14:57:04.211Z] Request to https://firebase.googleapis.com/v1beta1/projects/demo-chat had HTTP Error: 403, The caller does not have permission
[debug] [2025-09-24T14:57:04.212Z] Failed to retrieve default database instance: {"name":"FirebaseError","children":[],"exit":2,"message":"Failed to get Firebase project demo-chat. Please make sure the project exists and your account has permission to access it.","original":{"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://firebase.googleapis.com/v1beta1/projects/demo-chat had HTTP Error: 403, The caller does not have permission","status":403},"status":500} {"metadata":{"emulator":{"name":"database"},"message":"Failed to retrieve default database instance: {\"name\":\"FirebaseError\",\"children\":[],\"exit\":2,\"message\":\"Failed to get Firebase project demo-chat. Please make sure the project exists and your account has permission to access it.\",\"original\":{\"name\":\"FirebaseError\",\"children\":[],\"context\":{\"body\":{\"error\":{\"code\":403,\"message\":\"The caller does not have permission\",\"status\":\"PERMISSION_DENIED\"}},\"response\":{\"statusCode\":403}},\"exit\":1,\"message\":\"Request to https://firebase.googleapis.com/v1beta1/projects/demo-chat had HTTP Error: 403, The caller does not have permission\",\"status\":403},\"status\":500}"}}
[debug] [2025-09-24T14:57:04.212Z] database rules config:  [{"instance":"demo-chat-default-rtdb","rules":"/Users/giacomolanzi/workspace/firebase-chat-workshop/database.rules.json"}]
[debug] [2025-09-24T14:57:04.212Z] Ignoring unsupported arg: projectId {"metadata":{"emulator":{"name":"database"},"message":"Ignoring unsupported arg: projectId"}}
[debug] [2025-09-24T14:57:04.212Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"database"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2025-09-24T14:57:04.212Z] Ignoring unsupported arg: rules {"metadata":{"emulator":{"name":"database"},"message":"Ignoring unsupported arg: rules"}}
[debug] [2025-09-24T14:57:04.212Z] Starting Database Emulator with command {"binary":"java","args":["-Duser.language=en","-jar","/Users/giacomolanzi/.cache/firebase/emulators/firebase-database-emulator-v4.11.2.jar","--host","0.0.0.0","--port",9000,"--single_project_mode","Warning","--functions_emulator_host","127.0.0.1","--functions_emulator_port",5001],"optionalArgs":["port","host","functions_emulator_port","functions_emulator_host","single_project_mode"],"joinArgs":false,"shell":false,"port":9000} {"metadata":{"emulator":{"name":"database"},"message":"Starting Database Emulator with command {\"binary\":\"java\",\"args\":[\"-Duser.language=en\",\"-jar\",\"/Users/giacomolanzi/.cache/firebase/emulators/firebase-database-emulator-v4.11.2.jar\",\"--host\",\"0.0.0.0\",\"--port\",9000,\"--single_project_mode\",\"Warning\",\"--functions_emulator_host\",\"127.0.0.1\",\"--functions_emulator_port\",5001],\"optionalArgs\":[\"port\",\"host\",\"functions_emulator_port\",\"functions_emulator_host\",\"single_project_mode\"],\"joinArgs\":false,\"shell\":false,\"port\":9000}"}}
[info] i  database: Database Emulator logging to database-debug.log {"metadata":{"emulator":{"name":"database"},"message":"Database Emulator logging to \u001b[1mdatabase-debug.log\u001b[22m"}}
[debug] [2025-09-24T14:57:04.780Z] 16:57:04.779 [NamespaceSystem-akka.actor.default-dispatcher-4] INFO akka.event.slf4j.Slf4jLogger - Slf4jLogger started
 {"metadata":{"emulator":{"name":"database"},"message":"16:57:04.779 [NamespaceSystem-akka.actor.default-dispatcher-4] INFO akka.event.slf4j.Slf4jLogger - Slf4jLogger started\n"}}
[debug] [2025-09-24T14:57:04.849Z] 16:57:04.849 [main] INFO com.firebase.server.forge.App$ - Listening at 0.0.0.0:9000
 {"metadata":{"emulator":{"name":"database"},"message":"16:57:04.849 [main] INFO com.firebase.server.forge.App$ - Listening at 0.0.0.0:9000\n"}}
[debug] [2025-09-24T14:57:07.664Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"storage"},"message":"Ignoring unsupported arg: port"}}
[debug] [2025-09-24T14:57:08.211Z] Temp file directory for storage emulator: /var/folders/t5/fly5m1p125737lfdwg686b0h0000gn/T/firebase/storage/blobs {"metadata":{"emulator":{"name":"storage"},"message":"Temp file directory for storage emulator: /var/folders/t5/fly5m1p125737lfdwg686b0h0000gn/T/firebase/storage/blobs"}}
[info] i  functions: Watching "/Users/giacomolanzi/workspace/firebase-chat-workshop/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions\" for Cloud Functions..."}}
[debug] [2025-09-24T14:57:08.218Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2025-09-24T14:57:08.690Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .ts,.js .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log",
    "build": "tsc",
    "watch": "tsc --watch"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^5.1.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^6.21.0",
    "@typescript-eslint/parser": "^6.21.0",
    "eslint": "^8.57.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "typescript": "^5.4.5",
    "@types/glob": "^8.1.0",
    "@types/lru-cache": "^7.10.10"
  },
  "private": true
}
[debug] [2025-09-24T14:57:08.690Z] Building nodejs source
[debug] [2025-09-24T14:57:08.690Z] Failed to find version of module node: reached end of search path /Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules
[info] ✔  functions: Using node@20 from host. 
[debug] [2025-09-24T14:57:08.691Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-09-24T14:57:08.694Z] Found firebase-functions binary at '/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8057

[debug] [2025-09-24T14:57:08.940Z] Got response from /__/functions.yaml {"endpoints":{"helloWorld":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"helloWorld"},"createUserOnFirestore":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","eventFilters":{"resource":"projects/demo-chat"},"retry":false},"labels":{},"entryPoint":"createUserOnFirestore"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] ✔  functions: Loaded functions definitions from source: helloWorld, createUserOnFirestore. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: helloWorld, createUserOnFirestore."}}
[info] ✔  functions[us-central1-helloWorld]: http function initialized (http://127.0.0.1:5001/demo-chat/us-central1/helloWorld). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/demo-chat/us-central1/helloWorld)."}}
[debug] [2025-09-24T14:57:13.957Z] addAuthTrigger {"eventTrigger":{"eventType":"providers/firebase.auth/eventTypes/user.create","resource":"projects/demo-chat"}}
[info] ✔  functions[us-central1-createUserOnFirestore]: auth function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mauth\u001b[22m function initialized."}}
[debug] [2025-09-24T14:57:13.959Z] >>> [apiv2][query] PUT http://127.0.0.1:9000/.settings/rules.json ns=demo-chat-default-rtdb
[debug] [2025-09-24T14:57:13.959Z] >>> [apiv2][body] PUT http://127.0.0.1:9000/.settings/rules.json "{\n  \"rules\": {\n    \"rooms\": {\n      \"$roomId\": {\n        \"messages\": {\n          \".indexOn\": [\n            \"createdAt\"\n          ],\n          \"$messageId\": {\n            \".read\": true,\n            \".write\": \"auth != null && newData.child('senderId').val() == auth.uid && newData.child('text').isString() && newData.child('text').val().length > 0 && newData.child('text').val().length <= 1000 && newData.child('createdAt').val() == now\"\n          }\n        }\n      }\n    },\n    \"status\": {\n      \"$userId\": {\n        \".write\": \"auth != null && $userId == auth.uid\",\n        \".read\": true\n      }\n    }\n  }\n}"
[debug] [2025-09-24T14:57:14.084Z] 16:57:14.084 [NamespaceSystem-akka.actor.default-dispatcher-4] INFO com.firebase.core.namespace.NamespaceActor - demo-chat-default-rtdb successfully activated FBKV (SurveyIdle(0)) wait: 55ms, init: 0ms
 {"metadata":{"emulator":{"name":"database"},"message":"16:57:14.084 [NamespaceSystem-akka.actor.default-dispatcher-4] INFO com.firebase.core.namespace.NamespaceActor - demo-chat-default-rtdb successfully activated FBKV (SurveyIdle(0)) wait: 55ms, init: 0ms\n"}}
[debug] [2025-09-24T14:57:14.129Z] 16:57:14.128 [NamespaceSystem-blocking-namespace-operation-dispatcher-7] INFO com.firebase.core.namespace.StateManager - Namespace demo-chat-default-rtdb status Active to Active
 {"metadata":{"emulator":{"name":"database"},"message":"16:57:14.128 [NamespaceSystem-blocking-namespace-operation-dispatcher-7] INFO com.firebase.core.namespace.StateManager - Namespace demo-chat-default-rtdb status Active to Active\n"}}
[debug] [2025-09-24T14:57:14.152Z] <<< [apiv2][status] PUT http://127.0.0.1:9000/.settings/rules.json 200
[debug] [2025-09-24T14:57:14.152Z] <<< [apiv2][body] PUT http://127.0.0.1:9000/.settings/rules.json {"status":"ok"}
[debug] [2025-09-24T14:57:14.154Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4001/               │
└─────────────────────────────────────────────────────────────┘

┌────────────────┬────────────────┬─────────────────────────────────┐
│ Emulator       │ Host:Port      │ View in Emulator UI             │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Authentication │ 0.0.0.0:9099   │ http://127.0.0.1:4001/auth      │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Functions      │ 127.0.0.1:5001 │ http://127.0.0.1:4001/functions │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Firestore      │ 0.0.0.0:8080   │ http://127.0.0.1:4001/firestore │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Database       │ 0.0.0.0:9000   │ http://127.0.0.1:4001/database  │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Storage        │ 0.0.0.0:9199   │ http://127.0.0.1:4001/storage   │
└────────────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub host: 127.0.0.1 port: 4400
  Other reserved ports: 4500, 9150

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2025-09-24T14:57:40.552Z] Sep 24, 2025 4:57:40 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:57:40 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2025-09-24T14:57:54.163Z] Sep 24, 2025 4:57:54 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
Sep 24, 2025 4:57:54 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:57:54 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\nSep 24, 2025 4:57:54 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2025-09-24T14:57:57.087Z] Sep 24, 2025 4:57:57 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:57:57 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\n"}}
[debug] [2025-09-24T14:57:57.276Z] Sep 24, 2025 4:57:57 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:57:57 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2025-09-24T14:58:13.091Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T14:58:13.091Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"de0cc1ea-cd7d-4af9-82bd-f1f8eccf147c","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/demo-chat","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2025-09-24T14:58:13.091Z","data":{"uid":"IWlBEZWAty1yDcJiim8KzCYiuhqc","email":"g.lanzi@addiction.it","emailVerified":false,"displayName":"","photoURL":"","metadata":{"creationTime":"2025-09-24T14:58:13.089Z","lastSignInTime":"2025-09-24T14:58:13.089Z"},"customClaims":{},"providerData":[{"rawId":"g.lanzi@addiction.it","providerId":"password","displayName":"","email":"g.lanzi@addiction.it","federatedId":"g.lanzi@addiction.it","photoURL":""}],"mfaInfo":[]}}
[debug] [2025-09-24T14:58:13.094Z] [work-queue] {"queuedWork":["us-central1-createUserOnFirestore-0-2025-09-24T14:58:13.094Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-09-24T14:58:13.094Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["us-central1-createUserOnFirestore-0-2025-09-24T14:58:13.094Z"],"workRunningCount":1}
[debug] [2025-09-24T14:58:13.095Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-09-24T14:58:13.096Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T14:58:13.096Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T14:58:13.098Z] [work-queue] {"queuedWork":["/functions/projects/demo-chat/triggers/us-central1-createUserOnFirestore-0-2025-09-24T14:58:13.098Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-09-24T14:58:13.098Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/demo-chat/triggers/us-central1-createUserOnFirestore-0-2025-09-24T14:58:13.098Z"],"workRunningCount":1}
[debug] [2025-09-24T14:58:13.098Z] Accepted request POST /functions/projects/demo-chat/triggers/us-central1-createUserOnFirestore-0 --> us-central1-createUserOnFirestore-0
[debug] [2025-09-24T14:58:13.099Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-09-24T14:58:13.099Z] [functions] Got req.url=/functions/projects/demo-chat/triggers/us-central1-createUserOnFirestore-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/demo-chat/triggers/us-central1-createUserOnFirestore-0, mapping to path=/functions/projects/"}}
[debug] [2025-09-24T14:58:13.102Z] [worker-pool] addWorker(us-central1-createUserOnFirestore) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-createUserOnFirestore)"}}
[debug] [2025-09-24T14:58:13.103Z] [worker-pool] Adding worker with key us-central1-createUserOnFirestore, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-createUserOnFirestore, total=1"}}
[debug] [2025-09-24T14:58:14.528Z] [runtime-status] [71738] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-09-24T14:58:14.529Z] [runtime-status] [71738] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.1.1","resolution":"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.1.1\",\"resolution\":\"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-09-24T14:58:14.529Z] [runtime-status] [71738] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2025-09-24T14:58:14.529Z] [runtime-status] [71738] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.1.1","resolution":"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.1.1\",\"resolution\":\"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-09-24T14:58:14.629Z] [runtime-status] [71738] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] Checked functions.config() {\"config\":{}}"}}
[debug] [2025-09-24T14:58:14.629Z] [runtime-status] [71738] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"5.1.1","resolution":"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"5.1.1\",\"resolution\":\"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2025-09-24T14:58:14.629Z] [runtime-status] [71738] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.1.1","resolution":"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.1.1\",\"resolution\":\"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-09-24T14:58:14.629Z] [runtime-status] [71738] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-09-24T14:58:14.630Z] [runtime-status] [71738] Resolved module firebase-functions {"declared":true,"installed":true,"version":"5.1.1","resolution":"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"5.1.1\",\"resolution\":\"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2025-09-24T14:58:14.630Z] [runtime-status] [71738] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2025-09-24T14:58:14.631Z] [runtime-status] [71738] initializeApp(DEFAULT) {"storageBucket":"demo-chat.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=demo-chat","projectId":"demo-chat"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] initializeApp(DEFAULT) {\"storageBucket\":\"demo-chat.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=demo-chat\",\"projectId\":\"demo-chat\"}"}}
[debug] [2025-09-24T14:58:14.633Z] [runtime-status] [71738] Functions runtime initialized. {"cwd":"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions","node_version":"20.16.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] Functions runtime initialized. {\"cwd\":\"/Users/giacomolanzi/workspace/firebase-chat-workshop/functions\",\"node_version\":\"20.16.0\"}"}}
[debug] [2025-09-24T14:58:14.634Z] [runtime-status] [71738] Listening to port: /var/folders/t5/fly5m1p125737lfdwg686b0h0000gn/T/fire_emu_e4a513bc9dc3e740.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] Listening to port: /var/folders/t5/fly5m1p125737lfdwg686b0h0000gn/T/fire_emu_e4a513bc9dc3e740.sock"}}
[debug] [2025-09-24T14:58:14.733Z] [worker-us-central1-createUserOnFirestore-dd8d8397-0544-4707-90d6-a13912d274d0]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[worker-us-central1-createUserOnFirestore-dd8d8397-0544-4707-90d6-a13912d274d0]: IDLE"}}
[debug] [2025-09-24T14:58:14.733Z] [worker-pool] submitRequest(triggerId=us-central1-createUserOnFirestore) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-createUserOnFirestore)"}}
[info] i  functions: Beginning execution of "us-central1-createUserOnFirestore" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"Beginning execution of \"us-central1-createUserOnFirestore\""}}
[debug] [2025-09-24T14:58:14.734Z] [worker-us-central1-createUserOnFirestore-dd8d8397-0544-4707-90d6-a13912d274d0]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[worker-us-central1-createUserOnFirestore-dd8d8397-0544-4707-90d6-a13912d274d0]: BUSY"}}
[debug] [2025-09-24T14:58:14.742Z] [runtime-status] [71738] ProcessBackground: lifting resource.name from resource {"name":"projects/demo-chat","service":"firebaseauth.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/demo-chat\",\"service\":\"firebaseauth.googleapis.com\"}"}}
[debug] [2025-09-24T14:58:14.743Z] [runtime-status] [71738] RunBackground {"data":{"uid":"IWlBEZWAty1yDcJiim8KzCYiuhqc","email":"g.lanzi@addiction.it","emailVerified":false,"displayName":"","photoURL":"","metadata":{"creationTime":"2025-09-24T14:58:13.089Z","lastSignInTime":"2025-09-24T14:58:13.089Z"},"customClaims":{},"providerData":[{"rawId":"g.lanzi@addiction.it","providerId":"password","displayName":"","email":"g.lanzi@addiction.it","federatedId":"g.lanzi@addiction.it","photoURL":""}],"mfaInfo":[]},"context":{"eventId":"de0cc1ea-cd7d-4af9-82bd-f1f8eccf147c","eventType":"providers/firebase.auth/eventTypes/user.create","resource":"projects/demo-chat","params":{},"timestamp":"2025-09-24T14:58:13.091Z"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[runtime-status] [71738] RunBackground {\"data\":{\"uid\":\"IWlBEZWAty1yDcJiim8KzCYiuhqc\",\"email\":\"g.lanzi@addiction.it\",\"emailVerified\":false,\"displayName\":\"\",\"photoURL\":\"\",\"metadata\":{\"creationTime\":\"2025-09-24T14:58:13.089Z\",\"lastSignInTime\":\"2025-09-24T14:58:13.089Z\"},\"customClaims\":{},\"providerData\":[{\"rawId\":\"g.lanzi@addiction.it\",\"providerId\":\"password\",\"displayName\":\"\",\"email\":\"g.lanzi@addiction.it\",\"federatedId\":\"g.lanzi@addiction.it\",\"photoURL\":\"\"}],\"mfaInfo\":[]},\"context\":{\"eventId\":\"de0cc1ea-cd7d-4af9-82bd-f1f8eccf147c\",\"eventType\":\"providers/firebase.auth/eventTypes/user.create\",\"resource\":\"projects/demo-chat\",\"params\":{},\"timestamp\":\"2025-09-24T14:58:13.091Z\"}}"}}
[debug] [2025-09-24T14:58:14.901Z] Sep 24, 2025 4:58:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:58:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2025-09-24T14:58:15.237Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-createUserOnFirestore" in 503.141417ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"Finished \"us-central1-createUserOnFirestore\" in 503.141417ms"}}
[debug] [2025-09-24T14:58:15.237Z] [worker-us-central1-createUserOnFirestore-dd8d8397-0544-4707-90d6-a13912d274d0]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"[worker-us-central1-createUserOnFirestore-dd8d8397-0544-4707-90d6-a13912d274d0]: IDLE"}}
[debug] [2025-09-24T14:58:15.237Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-09-24T14:58:15.237Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-createUserOnFirestore"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-09-24T14:58:15.237Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-09-24T14:58:17.516Z] 16:58:17.516 [FirebaseWorkerPool-1-3] WARN com.firebase.core.persistence.backend.dummy.EmulatorMetadataPersistence - Multiple projectIds are not recommended in single project mode. Requested 
namespace demo-chat, but the emulator is configured for demo-chat-default-rtdb. To 
opt-out of single project mode add/set the singleProjectMode: false property in 
the firebase.json emulators config. 
 {"metadata":{"emulator":{"name":"database"},"message":"16:58:17.516 [FirebaseWorkerPool-1-3] WARN com.firebase.core.persistence.backend.dummy.EmulatorMetadataPersistence - Multiple projectIds are not recommended in single project mode. Requested \nnamespace demo-chat, but the emulator is configured for demo-chat-default-rtdb. To \nopt-out of single project mode add/set the singleProjectMode: false property in \nthe firebase.json emulators config. \n"}}
[debug] [2025-09-24T14:58:17.521Z] 16:58:17.521 [NamespaceSystem-akka.actor.default-dispatcher-4] INFO com.firebase.core.namespace.NamespaceActor - demo-chat successfully activated FBKV (SurveyIdle(0)) wait: 2ms, init: 0ms
 {"metadata":{"emulator":{"name":"database"},"message":"16:58:17.521 [NamespaceSystem-akka.actor.default-dispatcher-4] INFO com.firebase.core.namespace.NamespaceActor - demo-chat successfully activated FBKV (SurveyIdle(0)) wait: 2ms, init: 0ms\n"}}
[debug] [2025-09-24T14:58:20.442Z] Sep 24, 2025 4:58:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:58:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T14:58:20.592Z] Sep 24, 2025 4:58:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:58:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T14:58:24.109Z] Sep 24, 2025 4:58:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:58:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T14:58:24.120Z] Sep 24, 2025 4:58:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:58:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T14:58:27.679Z] Sep 24, 2025 4:58:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:58:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T14:58:27.689Z] Sep 24, 2025 4:58:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:58:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T14:58:38.718Z] Sep 24, 2025 4:58:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:58:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T14:58:38.727Z] Sep 24, 2025 4:58:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:58:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T14:59:53.737Z] Sep 24, 2025 4:59:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 4:59:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:00:16.627Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:00:16.627Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere e scrivere i propri dati\n    match /users/{userId} {\n      allow read, update, delete: if request.auth != null && request.auth.uid == userId;\n      allow create: if request.auth != null;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:00:16.630Z] Sep 24, 2025 5:00:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:00:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:00:16.664Z] Sep 24, 2025 5:00:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:00:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:00:16.683Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:00:16.683Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:00:25.562Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:00:25.562Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere e scrivere i propri dati\n    match /users/{userId} {\n      allow read, update, delete: if request.auth != null && request.auth.uid == userId;\n      allow create: if request.auth != null;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:00:25.564Z] Sep 24, 2025 5:00:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:00:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:00:25.577Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:00:25.577Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[debug] [2025-09-24T15:00:30.088Z] Sep 24, 2025 5:00:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:00:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:00:30.114Z] Sep 24, 2025 5:00:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:00:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:00:30.121Z] Sep 24, 2025 5:00:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:00:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:00:34.304Z] Sep 24, 2025 5:00:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:00:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:00:34.314Z] Sep 24, 2025 5:00:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:00:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:00:34.321Z] Sep 24, 2025 5:00:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:00:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:01:34.323Z] Sep 24, 2025 5:01:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:01:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:01:34.326Z] Sep 24, 2025 5:01:34 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:01:34 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:03:38.600Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:03:38.600Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      allow update, delete: if request.auth != null && request.auth.uid == userId;\n      allow create: if request.auth != null;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:03:38.601Z] Sep 24, 2025 5:03:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:03:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:03:38.610Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:03:38.611Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:03:53.013Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:03:53.013Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      allow update, delete: if request.auth != null && request.auth.uid == userId;\n      allow create: if request.auth != null;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:03:53.014Z] Sep 24, 2025 5:03:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:03:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:03:53.034Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:03:53.034Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[debug] [2025-09-24T15:03:56.431Z] Sep 24, 2025 5:03:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:03:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:03:56.440Z] Sep 24, 2025 5:03:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:03:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:03:56.446Z] Sep 24, 2025 5:03:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:03:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:04:45.213Z] Sep 24, 2025 5:04:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:04:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:04:45.239Z] Sep 24, 2025 5:04:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:04:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:04:45.277Z] Sep 24, 2025 5:04:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:04:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:04:45.303Z] Sep 24, 2025 5:04:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:04:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:04:56.452Z] Sep 24, 2025 5:04:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:04:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:04:56.458Z] Sep 24, 2025 5:04:56 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:04:56 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:04:58.292Z] Sep 24, 2025 5:04:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Sep 24, 2025 5:04:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:04:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nSep 24, 2025 5:04:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:05:05.707Z] Sep 24, 2025 5:05:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:05:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:05:05.716Z] Sep 24, 2025 5:05:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:05:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:05:05.721Z] Sep 24, 2025 5:05:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:05:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:05:42.214Z] Sep 24, 2025 5:05:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:05:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:05:42.225Z] Sep 24, 2025 5:05:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:05:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:05:42.240Z] Sep 24, 2025 5:05:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:05:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:05:42.252Z] Sep 24, 2025 5:05:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:05:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:05:44.145Z] Sep 24, 2025 5:05:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:05:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:05:44.153Z] Sep 24, 2025 5:05:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:05:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:05:44.159Z] Sep 24, 2025 5:05:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:05:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:06:24.899Z] Sep 24, 2025 5:06:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:06:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:06:24.906Z] Sep 24, 2025 5:06:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:06:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:06:24.912Z] Sep 24, 2025 5:06:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:06:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:06:27.558Z] Sep 24, 2025 5:06:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:06:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:06:42.263Z] Sep 24, 2025 5:06:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:06:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:06:42.553Z] Sep 24, 2025 5:06:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:06:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:06:42.558Z] Sep 24, 2025 5:06:42 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:06:42 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:07:24.923Z] Sep 24, 2025 5:07:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:07:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:07:24.928Z] Sep 24, 2025 5:07:24 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:07:24 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:07:27.578Z] Sep 24, 2025 5:07:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:07:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:07:42.748Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:07:42.748Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"1758726462748","timestamp":"2025-09-24T15:07:42.748Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/demo-chat.appspot.com/objects/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","type":"storage#object"},"data":{"kind":"storage#object","name":"avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726462661","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:07:42.661Z","updated":"2025-09-24T15:07:42.661Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"/+LOLcCk9+wYa7PvhEvhA/AkCDY","metadata":{"firebaseStorageDownloadTokens":"18111bd5-cdc8-4fe8-9ab4-837f7d5e6900"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:07:42.661Z","id":"demo-chat.appspot.com/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726462661","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726462661&alt=media"}}
[debug] [2025-09-24T15:07:42.750Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:07:42.750Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:07:42.750Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:07:42.750Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"specversion":"1.0","id":"243054eb-1a81-4d7a-a32b-1146c21642bd","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/demo-chat.appspot.com/objects/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","time":"2025-09-24T15:07:42.661Z","data":{"kind":"storage#object","name":"avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726462661","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:07:42.661Z","updated":"2025-09-24T15:07:42.661Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"/+LOLcCk9+wYa7PvhEvhA/AkCDY","metadata":{"firebaseStorageDownloadTokens":"18111bd5-cdc8-4fe8-9ab4-837f7d5e6900"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:07:42.661Z","id":"demo-chat.appspot.com/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726462661","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726462661&alt=media"}}
[debug] [2025-09-24T15:07:42.752Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:07:42.752Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:07:49.298Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:07:49.298Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"1758726469298","timestamp":"2025-09-24T15:07:49.298Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/demo-chat.appspot.com/objects/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","type":"storage#object"},"data":{"kind":"storage#object","name":"avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726469288","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:07:49.288Z","updated":"2025-09-24T15:07:49.288Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"Yd9USkVE6rLXqmF77O5T0yi3ee0","metadata":{"firebaseStorageDownloadTokens":"9ddf17e5-84bd-4f95-acd4-b99bb7de70a5"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:07:49.288Z","id":"demo-chat.appspot.com/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726469288","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726469288&alt=media"}}
[debug] [2025-09-24T15:07:49.300Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:07:49.300Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:07:49.300Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:07:49.300Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"specversion":"1.0","id":"09999191-65bf-4419-a9ce-8578ed86a90a","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/demo-chat.appspot.com/objects/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","time":"2025-09-24T15:07:49.288Z","data":{"kind":"storage#object","name":"avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726469288","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:07:49.288Z","updated":"2025-09-24T15:07:49.288Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"Yd9USkVE6rLXqmF77O5T0yi3ee0","metadata":{"firebaseStorageDownloadTokens":"9ddf17e5-84bd-4f95-acd4-b99bb7de70a5"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:07:49.288Z","id":"demo-chat.appspot.com/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726469288","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726469288&alt=media"}}
[debug] [2025-09-24T15:07:49.301Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:07:49.301Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:08:43.547Z] Sep 24, 2025 5:08:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:08:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:09:43.562Z] Sep 24, 2025 5:09:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:09:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:09:52.626Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:09:52.626Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"1758726592626","timestamp":"2025-09-24T15:09:52.626Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/demo-chat.appspot.com/objects/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","type":"storage#object"},"data":{"kind":"storage#object","name":"avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726592618","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:09:52.618Z","updated":"2025-09-24T15:09:52.618Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"LpW0PsPO2xvlbhij0LcAZBINBnM","metadata":{"firebaseStorageDownloadTokens":"2c89cb0a-121b-4564-941f-5bf1188d93ba"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:09:52.618Z","id":"demo-chat.appspot.com/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726592618","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726592618&alt=media"}}
[debug] [2025-09-24T15:09:52.627Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:09:52.627Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:09:52.627Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:09:52.627Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"specversion":"1.0","id":"9d178a96-b3c1-4045-8fc0-361a1825e8de","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/demo-chat.appspot.com/objects/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","time":"2025-09-24T15:09:52.618Z","data":{"kind":"storage#object","name":"avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726592618","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:09:52.618Z","updated":"2025-09-24T15:09:52.618Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"LpW0PsPO2xvlbhij0LcAZBINBnM","metadata":{"firebaseStorageDownloadTokens":"2c89cb0a-121b-4564-941f-5bf1188d93ba"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:09:52.618Z","id":"demo-chat.appspot.com/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726592618","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726592618&alt=media"}}
[debug] [2025-09-24T15:09:52.628Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:09:52.628Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:09:59.285Z] Sep 24, 2025 5:09:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:09:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:09:59.292Z] Sep 24, 2025 5:09:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:09:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:09:59.298Z] Sep 24, 2025 5:09:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:09:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:10:04.786Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:10:04.786Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"1758726604786","timestamp":"2025-09-24T15:10:04.786Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/demo-chat.appspot.com/objects/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","type":"storage#object"},"data":{"kind":"storage#object","name":"avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726604779","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:10:04.779Z","updated":"2025-09-24T15:10:04.779Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"KLz7iFbCC9E/w8B/k8koVqYDWEg","metadata":{"firebaseStorageDownloadTokens":"f11cbfae-1ca6-4b75-97d9-68d465d0ea34"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:10:04.779Z","id":"demo-chat.appspot.com/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726604779","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726604779&alt=media"}}
[debug] [2025-09-24T15:10:04.788Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:10:04.788Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:10:04.788Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:10:04.788Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"specversion":"1.0","id":"42642486-d885-4f94-b26a-238c6399d0df","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/demo-chat.appspot.com/objects/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","time":"2025-09-24T15:10:04.779Z","data":{"kind":"storage#object","name":"avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726604779","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:10:04.779Z","updated":"2025-09-24T15:10:04.779Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"KLz7iFbCC9E/w8B/k8koVqYDWEg","metadata":{"firebaseStorageDownloadTokens":"f11cbfae-1ca6-4b75-97d9-68d465d0ea34"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:10:04.779Z","id":"demo-chat.appspot.com/avatars/undefined/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726604779","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fundefined%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726604779&alt=media"}}
[debug] [2025-09-24T15:10:04.789Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:10:04.789Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:10:33.600Z] Sep 24, 2025 5:10:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:10:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:10:33.608Z] Sep 24, 2025 5:10:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:10:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:10:33.614Z] Sep 24, 2025 5:10:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:10:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:10:39.782Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:10:39.782Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"1758726639781","timestamp":"2025-09-24T15:10:39.781Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","type":"storage#object"},"data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726639775","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:10:39.776Z","updated":"2025-09-24T15:10:39.776Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"ILNpkxJzuemv2lfWd8gWXKkgPY8","metadata":{"firebaseStorageDownloadTokens":"f6b45e86-dda7-4ec9-88a4-500c2f47b767"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:10:39.776Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726639775","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726639775&alt=media"}}
[debug] [2025-09-24T15:10:39.783Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:10:39.783Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:10:39.784Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:10:39.784Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"specversion":"1.0","id":"b598e791-cd65-4602-bf38-7b8dd776af7c","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","time":"2025-09-24T15:10:39.776Z","data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726639775","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:10:39.776Z","updated":"2025-09-24T15:10:39.776Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"ILNpkxJzuemv2lfWd8gWXKkgPY8","metadata":{"firebaseStorageDownloadTokens":"f6b45e86-dda7-4ec9-88a4-500c2f47b767"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:10:39.776Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726639775","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726639775&alt=media"}}
[debug] [2025-09-24T15:10:39.784Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:10:39.784Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:10:43.572Z] Sep 24, 2025 5:10:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:10:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:10:43.659Z] Sep 24, 2025 5:10:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:10:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:10:43.666Z] Sep 24, 2025 5:10:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:10:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:10:43.672Z] Sep 24, 2025 5:10:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:10:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:10:43.679Z] Sep 24, 2025 5:10:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: 
false for 'update' @ L9
com.google.cloud.datastore.core.exception.DatastoreException: 
false for 'update' @ L9
	at com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)
	at com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)
	at com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)
	at com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)
	at com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)
	at com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:10:43 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: \nfalse for 'update' @ L9\ncom.google.cloud.datastore.core.exception.DatastoreException: \nfalse for 'update' @ L9\n\tat com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)\n\tat com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)\n\n"}}
[debug] [2025-09-24T15:10:43.682Z] Sep 24, 2025 5:10:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:10:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:10:43.683Z] Sep 24, 2025 5:10:43 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:10:43 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:11:00.122Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:11:00.122Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"1758726660122","timestamp":"2025-09-24T15:11:00.122Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","type":"storage#object"},"data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726660116","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:11:00.116Z","updated":"2025-09-24T15:11:00.116Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"E4yYRyyHUgBT5oJWxcXJvIE98SA","metadata":{"firebaseStorageDownloadTokens":"f2d1d602-ecd7-4883-a9d0-2b2159d1bc39"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:11:00.116Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726660116","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726660116&alt=media"}}
[debug] [2025-09-24T15:11:00.125Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:11:00.125Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:11:00.126Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:11:00.126Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"specversion":"1.0","id":"24280f39-fbfb-4483-9362-a3232798264f","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","time":"2025-09-24T15:11:00.116Z","data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726660116","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:11:00.116Z","updated":"2025-09-24T15:11:00.116Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"E4yYRyyHUgBT5oJWxcXJvIE98SA","metadata":{"firebaseStorageDownloadTokens":"f2d1d602-ecd7-4883-a9d0-2b2159d1bc39"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:11:00.116Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726660116","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726660116&alt=media"}}
[debug] [2025-09-24T15:11:00.127Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:11:00.127Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:11:00.145Z] Sep 24, 2025 5:11:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:00.150Z] Sep 24, 2025 5:11:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:00.153Z] Sep 24, 2025 5:11:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:00.157Z] Sep 24, 2025 5:11:00 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: 
false for 'update' @ L9
com.google.cloud.datastore.core.exception.DatastoreException: 
false for 'update' @ L9
	at com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)
	at com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)
	at com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)
	at com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)
	at com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)
	at com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:00 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: \nfalse for 'update' @ L9\ncom.google.cloud.datastore.core.exception.DatastoreException: \nfalse for 'update' @ L9\n\tat com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)\n\tat com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)\n\n"}}
[debug] [2025-09-24T15:11:00.158Z] Sep 24, 2025 5:11:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:00.160Z] Sep 24, 2025 5:11:00 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:00 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:11:02.320Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:11:02.321Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"1758726662320","timestamp":"2025-09-24T15:11:02.320Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","type":"storage#object"},"data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726662314","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:11:02.314Z","updated":"2025-09-24T15:11:02.314Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"yWNwMY2hqT1vMmtjcHFN8tBjHCE","metadata":{"firebaseStorageDownloadTokens":"88a14c1b-e3ab-45d3-818c-600e1261d5df"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:11:02.314Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726662314","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726662314&alt=media"}}
[debug] [2025-09-24T15:11:02.322Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:11:02.322Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:11:02.322Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:11:02.322Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"specversion":"1.0","id":"443b1d0f-2aa0-4e73-8a87-5e80167f2976","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","time":"2025-09-24T15:11:02.314Z","data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726662314","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:11:02.314Z","updated":"2025-09-24T15:11:02.314Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"yWNwMY2hqT1vMmtjcHFN8tBjHCE","metadata":{"firebaseStorageDownloadTokens":"88a14c1b-e3ab-45d3-818c-600e1261d5df"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:11:02.314Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726662314","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726662314&alt=media"}}
[debug] [2025-09-24T15:11:02.322Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:11:02.322Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:11:02.353Z] Sep 24, 2025 5:11:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:02.357Z] Sep 24, 2025 5:11:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:02.360Z] Sep 24, 2025 5:11:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:02.364Z] Sep 24, 2025 5:11:02 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: 
false for 'update' @ L9
com.google.cloud.datastore.core.exception.DatastoreException: 
false for 'update' @ L9
	at com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)
	at com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)
	at com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)
	at com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)
	at com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)
	at com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:02 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: \nfalse for 'update' @ L9\ncom.google.cloud.datastore.core.exception.DatastoreException: \nfalse for 'update' @ L9\n\tat com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)\n\tat com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)\n\n"}}
[debug] [2025-09-24T15:11:02.366Z] Sep 24, 2025 5:11:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:02.367Z] Sep 24, 2025 5:11:02 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:02 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:11:39.065Z] Sep 24, 2025 5:11:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:39.076Z] Sep 24, 2025 5:11:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:39.079Z] Sep 24, 2025 5:11:39 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:39 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:11:39.925Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:11:39.925Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"1758726699925","timestamp":"2025-09-24T15:11:39.925Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","type":"storage#object"},"data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726699919","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:11:39.919Z","updated":"2025-09-24T15:11:39.919Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"wRri3D4WPWwc1uOG0vOIdZZ8UHg","metadata":{"firebaseStorageDownloadTokens":"984c605a-958a-4a19-9d53-c780772ea112"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:11:39.919Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726699919","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726699919&alt=media"}}
[debug] [2025-09-24T15:11:39.926Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:11:39.926Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:11:39.927Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:11:39.927Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"specversion":"1.0","id":"156b0005-e276-4a00-9a10-abca7c0af80e","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","time":"2025-09-24T15:11:39.919Z","data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726699919","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:11:39.919Z","updated":"2025-09-24T15:11:39.919Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"wRri3D4WPWwc1uOG0vOIdZZ8UHg","metadata":{"firebaseStorageDownloadTokens":"984c605a-958a-4a19-9d53-c780772ea112"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:11:39.919Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726699919","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726699919&alt=media"}}
[debug] [2025-09-24T15:11:39.927Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:11:39.927Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:11:39.954Z] Sep 24, 2025 5:11:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:39.958Z] Sep 24, 2025 5:11:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:39.960Z] Sep 24, 2025 5:11:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:39.964Z] Sep 24, 2025 5:11:39 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: 
false for 'update' @ L9
com.google.cloud.datastore.core.exception.DatastoreException: 
false for 'update' @ L9
	at com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)
	at com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)
	at com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)
	at com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)
	at com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)
	at com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:39 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: \nfalse for 'update' @ L9\ncom.google.cloud.datastore.core.exception.DatastoreException: \nfalse for 'update' @ L9\n\tat com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)\n\tat com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)\n\n"}}
[debug] [2025-09-24T15:11:39.966Z] Sep 24, 2025 5:11:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:39.967Z] Sep 24, 2025 5:11:39 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:39 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:11:44.188Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:11:44.188Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"1758726704188","timestamp":"2025-09-24T15:11:44.188Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","type":"storage#object"},"data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726704181","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:11:44.181Z","updated":"2025-09-24T15:11:44.181Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"Mr87F9AqdhSd1CQWL7kpuUfmnzw","metadata":{"firebaseStorageDownloadTokens":"3e3474d4-9bfa-4c09-a3d9-c4533c94e082"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:11:44.181Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726704181","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726704181&alt=media"}}
[debug] [2025-09-24T15:11:44.189Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:11:44.189Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:11:44.189Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:11:44.189Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"specversion":"1.0","id":"7e601e61-a0c5-440f-86f9-1e195ae62801","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","time":"2025-09-24T15:11:44.181Z","data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726704181","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:11:44.181Z","updated":"2025-09-24T15:11:44.181Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"Mr87F9AqdhSd1CQWL7kpuUfmnzw","metadata":{"firebaseStorageDownloadTokens":"3e3474d4-9bfa-4c09-a3d9-c4533c94e082"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:11:44.181Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726704181","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726704181&alt=media"}}
[debug] [2025-09-24T15:11:44.190Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:11:44.190Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:11:49.173Z] Sep 24, 2025 5:11:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:49.182Z] Sep 24, 2025 5:11:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:49.187Z] Sep 24, 2025 5:11:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:49.192Z] Sep 24, 2025 5:11:49 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: 
false for 'update' @ L9
com.google.cloud.datastore.core.exception.DatastoreException: 
false for 'update' @ L9
	at com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)
	at com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)
	at com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)
	at com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)
	at com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)
	at com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:49 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: \nfalse for 'update' @ L9\ncom.google.cloud.datastore.core.exception.DatastoreException: \nfalse for 'update' @ L9\n\tat com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)\n\tat com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)\n\n"}}
[debug] [2025-09-24T15:11:49.194Z] Sep 24, 2025 5:11:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:11:49.196Z] Sep 24, 2025 5:11:49 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:49 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:11:59.550Z] Sep 24, 2025 5:11:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:11:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:12:59.563Z] Sep 24, 2025 5:12:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:12:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:13:01.441Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:13:01.441Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      // Permetti l'aggiornamento solo di campi specifici\n      allow update: if request.auth != null && request.auth.uid == userId\n                    && request.resource.data.keys().hasOnly(['id', 'name', 'surname', 'email', 'avatar']);\n      allow create: if request.auth != null;\n      allow delete: if request.auth != null && request.auth.uid == userId;\n    }\n\n    // Chiunque sia autenticato può leggere e scrivere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:13:01.443Z] Sep 24, 2025 5:13:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:13:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:13:01.458Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:13:01.458Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[debug] [2025-09-24T15:13:09.438Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:13:09.439Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"1758726789438","timestamp":"2025-09-24T15:13:09.438Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","type":"storage#object"},"data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726789432","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:13:09.432Z","updated":"2025-09-24T15:13:09.432Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"rtao7L69TdMYN7qvxwL33jUskcM","metadata":{"firebaseStorageDownloadTokens":"1e33074c-8829-43ee-a512-fdf920d27179"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:13:09.432Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726789432","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726789432&alt=media"}}
[debug] [2025-09-24T15:13:09.440Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:13:09.440Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:13:09.440Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:13:09.440Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"specversion":"1.0","id":"67593b4d-c571-4b0b-8231-19b995843b62","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","time":"2025-09-24T15:13:09.432Z","data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726789432","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:13:09.432Z","updated":"2025-09-24T15:13:09.432Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"rtao7L69TdMYN7qvxwL33jUskcM","metadata":{"firebaseStorageDownloadTokens":"1e33074c-8829-43ee-a512-fdf920d27179"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:13:09.432Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726789432","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726789432&alt=media"}}
[debug] [2025-09-24T15:13:09.440Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:13:09.440Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:13:10.729Z] Sep 24, 2025 5:13:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:13:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:13:10.738Z] Sep 24, 2025 5:13:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:13:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:13:10.742Z] Sep 24, 2025 5:13:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:13:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:13:10.746Z] Sep 24, 2025 5:13:10 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: 
false for 'update' @ L10
com.google.cloud.datastore.core.exception.DatastoreException: 
false for 'update' @ L10
	at com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)
	at com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)
	at com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)
	at com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)
	at com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)
	at com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:13:10 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: \nfalse for 'update' @ L10\ncom.google.cloud.datastore.core.exception.DatastoreException: \nfalse for 'update' @ L10\n\tat com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)\n\tat com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)\n\n"}}
[debug] [2025-09-24T15:13:10.748Z] Sep 24, 2025 5:13:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:13:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:13:10.749Z] Sep 24, 2025 5:13:10 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:13:10 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:13:28.000Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:13:28.000Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      allow update, delete: if request.auth != null && request.auth.uid == userId;\n      allow create: if request.auth != null;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:13:28.001Z] Sep 24, 2025 5:13:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:13:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:13:28.010Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:13:28.010Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[debug] [2025-09-24T15:13:45.546Z] Sep 24, 2025 5:13:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:13:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:14:39.515Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:14:39.515Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      allow update, delete: if request.auth != null && request.auth.uid == userId;\n      allow create: if request.auth != null;\n\n      // Permetti l'aggiornamento dell'avatar se l'utente è autenticato\n      // e l'email nel documento corrisponde a quella dell'utente autenticato.\n      allow update: if request.auth != null && request.auth.token.email == resource.data.email;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:14:39.516Z] Sep 24, 2025 5:14:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:14:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:14:39.524Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:14:39.524Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[debug] [2025-09-24T15:14:45.556Z] Sep 24, 2025 5:14:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:14:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:14:59.644Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:14:59.646Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      allow update, delete: if request.auth != null && request.auth.uid == userId;\n      allow create: if request.auth != null;\n\n      // Permetti l'aggiornamento dell'avatar se l'utente è autenticato\n      // e l'email nel documento corrisponde a quella dell'utente autenticato.\n      allow update: if request.auth != null && request.auth.token.email == resource.data.email;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:14:59.648Z] Sep 24, 2025 5:14:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:14:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:14:59.657Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:14:59.658Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[debug] [2025-09-24T15:15:11.791Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:15:11.791Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"1758726911791","timestamp":"2025-09-24T15:15:11.791Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","type":"storage#object"},"data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726911785","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:15:11.785Z","updated":"2025-09-24T15:15:11.785Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"oNEc8Cam0XL9IBLGb7E0sTzHSpo","metadata":{"firebaseStorageDownloadTokens":"e9e3683f-e64c-4e52-ae6d-b532be7b8c4b"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:15:11.785Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726911785","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726911785&alt=media"}}
[debug] [2025-09-24T15:15:11.793Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:15:11.793Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:15:11.793Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:15:11.793Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"specversion":"1.0","id":"56308ceb-5469-4d60-bf43-974fcb2bb84e","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","time":"2025-09-24T15:15:11.785Z","data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726911785","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:15:11.785Z","updated":"2025-09-24T15:15:11.785Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"oNEc8Cam0XL9IBLGb7E0sTzHSpo","metadata":{"firebaseStorageDownloadTokens":"e9e3683f-e64c-4e52-ae6d-b532be7b8c4b"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:15:11.785Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726911785","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726911785&alt=media"}}
[debug] [2025-09-24T15:15:11.794Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:15:11.794Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:15:14.774Z] Sep 24, 2025 5:15:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:15:14.782Z] Sep 24, 2025 5:15:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:15:14.785Z] Sep 24, 2025 5:15:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:15:14.818Z] Sep 24, 2025 5:15:14 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: 
false for 'update' @ L9, evaluation error at L14:24 for 'update' @ L14, false for 'update' @ L9, Null value error. for 'update' @ L14
com.google.cloud.datastore.core.exception.DatastoreException: 
false for 'update' @ L9, evaluation error at L14:24 for 'update' @ L14, false for 'update' @ L9, Null value error. for 'update' @ L14
	at com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)
	at com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)
	at com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)
	at com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)
	at com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)
	at com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)
Caused by: com.google.firebase.rules.runtime.common.EvaluationException: Error: security.rules line [14], column [76]. Null value error.
	at com.google.firebase.rules.runtime.impl.DefaultEvaluator$TransformEvaluationException.apply(DefaultEvaluator.java:275)
	at com.google.firebase.rules.runtime.impl.DefaultEvaluator$TransformEvaluationException.apply(DefaultEvaluator.java:261)
	at com.google.common.util.concurrent.AbstractCatchingFuture$AsyncCatchingFuture.doFallback(AbstractCatchingFuture.java:211)
	at com.google.common.util.concurrent.AbstractCatchingFuture$AsyncCatchingFuture.doFallback(AbstractCatchingFuture.java:198)
	at com.google.common.util.concurrent.AbstractCatchingFuture.run(AbstractCatchingFuture.java:140)
	at com.google.common.util.concurrent.DirectExecutor.execute(DirectExecutor.java:32)
	at com.google.common.util.concurrent.AbstractFuture.executeListener(AbstractFuture.java:1306)
	at com.google.common.util.concurrent.AbstractFuture.addListener(AbstractFuture.java:767)
	at com.google.common.util.concurrent.FluentFuture$TrustedFuture.addListener(FluentFuture.java:122)
	at com.google.common.util.concurrent.AbstractCatchingFuture.createAsync(AbstractCatchingFuture.java:63)
	at com.google.common.util.concurrent.Futures.catchingAsync(Futures.java:413)
	at com.google.firebase.rules.runtime.impl.DefaultEvaluator.evaluate(DefaultEvaluator.java:177)
	at com.google.cloud.datastore.emulator.impl.rules.EmulatorRuleClient$EmulatorRuleEvaluator.evaluate(EmulatorRuleClient.java:88)
	at com.google.cloud.datastore.core.auth.rules.AsyncTwoPhaseRulesAuthorizer.lambda$fullEvaluate$12(AsyncTwoPhaseRulesAuthorizer.java:952)
	at com.google.cloud.datastore.computation.Computation.tryCatch(Computation.java:416)
	at com.google.cloud.datastore.core.auth.rules.AsyncTwoPhaseRulesAuthorizer.fullEvaluate(AsyncTwoPhaseRulesAuthorizer.java:951)
	at com.google.cloud.datastore.core.auth.rules.AsyncTwoPhaseRulesAuthorizer$CommitAuthorizerImpl.lambda$checkWrite$1(AsyncTwoPhaseRulesAuthorizer.java:1192)
	at com.google.cloud.datastore.computation.Computation.lambda$tryClose$27(Computation.java:685)
	at com.google.cloud.datastore.computation.Computation.tryCatch(Computation.java:416)
	at com.google.cloud.datastore.computation.Computation.tryFinally(Computation.java:652)
	at com.google.cloud.datastore.computation.Computation.tryFinally(Computation.java:658)
	at com.google.cloud.datastore.computation.Computation.tryClose(Computation.java:685)
	at com.google.cloud.datastore.core.auth.rules.AsyncTwoPhaseRulesAuthorizer$CommitAuthorizerImpl.checkWrite(AsyncTwoPhaseRulesAuthorizer.java:1161)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.lambda$checkCommit$0(DefaultEmulatorRulesAuthorizer.java:124)
	at com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:290)
	... 21 more

 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:14 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: \nfalse for 'update' @ L9, evaluation error at L14:24 for 'update' @ L14, false for 'update' @ L9, Null value error. for 'update' @ L14\ncom.google.cloud.datastore.core.exception.DatastoreException: \nfalse for 'update' @ L9, evaluation error at L14:24 for 'update' @ L14, false for 'update' @ L9, Null value error. for 'update' @ L14\n\tat com.google.cloud.datastore.core.exception.DatastoreException$Builder.build(DatastoreException.java:121)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.verboseError(DefaultEmulatorRulesAuthorizer.java:318)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:295)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.checkCommit(DefaultEmulatorRulesAuthorizer.java:114)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:360)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)\n\tat com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)\nCaused by: com.google.firebase.rules.runtime.common.EvaluationException: Error: security.rules line [14], column [76]. Null value error.\n\tat com.google.firebase.rules.runtime.impl.DefaultEvaluator$TransformEvaluationException.apply(DefaultEvaluator.java:275)\n\tat com.google.firebase.rules.runtime.impl.DefaultEvaluator$TransformEvaluationException.apply(DefaultEvaluator.java:261)\n\tat com.google.common.util.concurrent.AbstractCatchingFuture$AsyncCatchingFuture.doFallback(AbstractCatchingFuture.java:211)\n\tat com.google.common.util.concurrent.AbstractCatchingFuture$AsyncCatchingFuture.doFallback(AbstractCatchingFuture.java:198)\n\tat com.google.common.util.concurrent.AbstractCatchingFuture.run(AbstractCatchingFuture.java:140)\n\tat com.google.common.util.concurrent.DirectExecutor.execute(DirectExecutor.java:32)\n\tat com.google.common.util.concurrent.AbstractFuture.executeListener(AbstractFuture.java:1306)\n\tat com.google.common.util.concurrent.AbstractFuture.addListener(AbstractFuture.java:767)\n\tat com.google.common.util.concurrent.FluentFuture$TrustedFuture.addListener(FluentFuture.java:122)\n\tat com.google.common.util.concurrent.AbstractCatchingFuture.createAsync(AbstractCatchingFuture.java:63)\n\tat com.google.common.util.concurrent.Futures.catchingAsync(Futures.java:413)\n\tat com.google.firebase.rules.runtime.impl.DefaultEvaluator.evaluate(DefaultEvaluator.java:177)\n\tat com.google.cloud.datastore.emulator.impl.rules.EmulatorRuleClient$EmulatorRuleEvaluator.evaluate(EmulatorRuleClient.java:88)\n\tat com.google.cloud.datastore.core.auth.rules.AsyncTwoPhaseRulesAuthorizer.lambda$fullEvaluate$12(AsyncTwoPhaseRulesAuthorizer.java:952)\n\tat com.google.cloud.datastore.computation.Computation.tryCatch(Computation.java:416)\n\tat com.google.cloud.datastore.core.auth.rules.AsyncTwoPhaseRulesAuthorizer.fullEvaluate(AsyncTwoPhaseRulesAuthorizer.java:951)\n\tat com.google.cloud.datastore.core.auth.rules.AsyncTwoPhaseRulesAuthorizer$CommitAuthorizerImpl.lambda$checkWrite$1(AsyncTwoPhaseRulesAuthorizer.java:1192)\n\tat com.google.cloud.datastore.computation.Computation.lambda$tryClose$27(Computation.java:685)\n\tat com.google.cloud.datastore.computation.Computation.tryCatch(Computation.java:416)\n\tat com.google.cloud.datastore.computation.Computation.tryFinally(Computation.java:652)\n\tat com.google.cloud.datastore.computation.Computation.tryFinally(Computation.java:658)\n\tat com.google.cloud.datastore.computation.Computation.tryClose(Computation.java:685)\n\tat com.google.cloud.datastore.core.auth.rules.AsyncTwoPhaseRulesAuthorizer$CommitAuthorizerImpl.checkWrite(AsyncTwoPhaseRulesAuthorizer.java:1161)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.lambda$checkCommit$0(DefaultEmulatorRulesAuthorizer.java:124)\n\tat com.google.cloud.datastore.emulator.impl.rules.DefaultEmulatorRulesAuthorizer.withVerboseErrors(DefaultEmulatorRulesAuthorizer.java:290)\n\t... 21 more\n\n"}}
[debug] [2025-09-24T15:15:14.820Z] Sep 24, 2025 5:15:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:15:14.822Z] Sep 24, 2025 5:15:14 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:14 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:15:31.549Z] Sep 24, 2025 5:15:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:15:37.716Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:15:37.716Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      // L'utente può aggiornare un documento se il suo UID corrisponde al `userId` del documento\n      // O se la sua email corrisponde al `userId` del documento (che è l'email)\n      allow update: if request.auth != null && \n                      (request.auth.uid == userId || request.auth.token.email == userId);\n      allow delete: if request.auth != null && request.auth.uid == userId;\n      allow create: if request.auth != null;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:15:37.717Z] Sep 24, 2025 5:15:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:15:37.726Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:15:37.726Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:15:45.964Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:15:45.965Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      // L'utente può aggiornare un documento se il suo UID corrisponde al `userId` del documento\n      // O se la sua email corrisponde al `userId` del documento (che è l'email)\n      allow update: if request.auth != null &&\n                      (request.auth.uid == userId || request.auth.token.email == userId);\n      allow delete: if request.auth != null && request.auth.uid == userId;\n      allow create: if request.auth != null;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:15:45.968Z] Sep 24, 2025 5:15:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:15:45.984Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:15:45.984Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[debug] [2025-09-24T15:15:54.696Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:15:54.696Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"1758726954696","timestamp":"2025-09-24T15:15:54.696Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","type":"storage#object"},"data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726954691","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:15:54.691Z","updated":"2025-09-24T15:15:54.691Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"mPmLudDJGt2vEq1yPryUC8ZBc0Q","metadata":{"firebaseStorageDownloadTokens":"f7b2fb2d-131f-4aed-b884-c7f5bcd17d5a"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:15:54.691Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726954691","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726954691&alt=media"}}
[debug] [2025-09-24T15:15:54.697Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:15:54.697Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:15:54.697Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:15:54.697Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"specversion":"1.0","id":"fbe24552-5fb9-4ce9-9962-21fe3ade3de6","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","time":"2025-09-24T15:15:54.691Z","data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758726954691","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:15:54.691Z","updated":"2025-09-24T15:15:54.691Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"mPmLudDJGt2vEq1yPryUC8ZBc0Q","metadata":{"firebaseStorageDownloadTokens":"f7b2fb2d-131f-4aed-b884-c7f5bcd17d5a"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:15:54.691Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758726954691","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758726954691&alt=media"}}
[debug] [2025-09-24T15:15:54.698Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:15:54.698Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:15:54.714Z] Sep 24, 2025 5:15:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:15:54.718Z] Sep 24, 2025 5:15:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:15:54.721Z] Sep 24, 2025 5:15:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:15:54.728Z] Sep 24, 2025 5:15:54 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: no entity to update: app: "dev~demo-chat"
path <
  Element {
    type: "users"
    name: "g.lanzi@addiction.it"
  }
>

com.google.cloud.datastore.core.exception.DatastoreException: no entity to update: app: "dev~demo-chat"
path <
  Element {
    type: "users"
    name: "g.lanzi@addiction.it"
  }
>

	at com.google.cloud.datastore.core.exception.DatastoreException.withProblem(DatastoreException.java:207)
	at com.google.cloud.datastore.emulator.impl.util.FirestoreEmulatorConverters.checkMutation(FirestoreEmulatorConverters.java:202)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:365)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)
	at com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)
	at com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)
	at com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)
	at com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)
	at com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)
	at com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)
	at com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:54 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: no entity to update: app: \"dev~demo-chat\"\npath <\n  Element {\n    type: \"users\"\n    name: \"g.lanzi@addiction.it\"\n  }\n>\n\ncom.google.cloud.datastore.core.exception.DatastoreException: no entity to update: app: \"dev~demo-chat\"\npath <\n  Element {\n    type: \"users\"\n    name: \"g.lanzi@addiction.it\"\n  }\n>\n\n\tat com.google.cloud.datastore.core.exception.DatastoreException.withProblem(DatastoreException.java:207)\n\tat com.google.cloud.datastore.emulator.impl.util.FirestoreEmulatorConverters.checkMutation(FirestoreEmulatorConverters.java:202)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:365)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:160)\n\tat com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler.onMessage(FirestoreV1WebChannelAdapter.java:130)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.onMessage(ChannelInternalImpl.java:525)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.deliverMessage(ForwardChannel.java:114)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.processPendingRequest(ForwardChannel.java:93)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.consume(ForwardChannel.java:67)\n\tat com.google.net.webchannel.server.v8.ForwardChannel.add(ForwardChannel.java:60)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handleRequestBody(ChannelInternalImpl.java:290)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.processSessionRequest(ChannelInternalImpl.java:357)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.handle(ChannelInternalImpl.java:172)\n\tat com.google.net.webchannel.server.v8.ChannelInternalImpl.consume(ChannelInternalImpl.java:91)\n\tat com.google.net.webchannel.server.common.ChannelProcessor.run(ChannelProcessor.java:86)\n\n"}}
[debug] [2025-09-24T15:15:54.730Z] Sep 24, 2025 5:15:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:15:54.732Z] Sep 24, 2025 5:15:54 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:15:54 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:16:31.566Z] Sep 24, 2025 5:16:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:16:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:16:37.892Z] Sep 24, 2025 5:16:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Sep 24, 2025 5:16:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Sep 24, 2025 5:16:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:16:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nSep 24, 2025 5:16:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nSep 24, 2025 5:16:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:16:40.827Z] Sep 24, 2025 5:16:40 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:16:40 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:16:40.830Z] Sep 24, 2025 5:16:40 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:16:40 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:16:44.231Z] Sep 24, 2025 5:16:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:16:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:16:44.238Z] Sep 24, 2025 5:16:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:16:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:16:44.246Z] Sep 24, 2025 5:16:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:16:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:17:44.278Z] Sep 24, 2025 5:17:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:17:44 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:17:54.610Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:17:54.610Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      // L'utente può aggiornare un documento se il suo UID corrisponde al `userId` del documento\n      // O se la sua email corrisponde al `userId` del documento (che è l'email)\n      allow update: if request.auth != null &&\n                      (request.auth.uid == userId || request.auth.token.email == userId);\n      allow delete: if request.auth != null && request.auth.uid == userId;\n      allow create: if request.auth != null;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:17:54.612Z] Sep 24, 2025 5:17:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:17:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:17:54.623Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:17:54.624Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[debug] [2025-09-24T15:17:58.728Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:17:58.728Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"eventId":"1758727078728","timestamp":"2025-09-24T15:17:58.728Z","eventType":"google.storage.object.finalize","resource":{"service":"storage.googleapis.com","name":"projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","type":"storage#object"},"data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758727078722","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:17:58.722Z","updated":"2025-09-24T15:17:58.722Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"E9wimzzZfJbELr5OeUlD534jiRg","metadata":{"firebaseStorageDownloadTokens":"ea0c6f5e-4ee2-4d60-9fec-97ddf37a36aa"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:17:58.722Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758727078722","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758727078722&alt=media"}}
[debug] [2025-09-24T15:17:58.730Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:17:58.730Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:17:58.730Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast [none]
[debug] [2025-09-24T15:17:58.730Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"specversion":"1.0","id":"8df59197-524d-4ce2-8a22-412f27742a31","type":"google.cloud.storage.object.v1.finalized","source":"//storage.googleapis.com/projects/_/buckets/demo-chat.appspot.com/objects/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","time":"2025-09-24T15:17:58.722Z","data":{"kind":"storage#object","name":"avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png","bucket":"demo-chat.appspot.com","generation":"1758727078722","metageneration":"1","contentType":"image/png","timeCreated":"2025-09-24T15:17:58.722Z","updated":"2025-09-24T15:17:58.722Z","storageClass":"STANDARD","size":"445483","md5Hash":"4pgJ4haKzxk8BCCI8GHbzw==","etag":"E9wimzzZfJbELr5OeUlD534jiRg","metadata":{"firebaseStorageDownloadTokens":"ea0c6f5e-4ee2-4d60-9fec-97ddf37a36aa"},"crc32c":"6F46ow==","timeStorageClassUpdated":"2025-09-24T15:17:58.722Z","id":"demo-chat.appspot.com/avatars/g.lanzi@addiction.it/Simulator Screenshot - iPad Air 13-inch (M3) - 2025-09-19 at 10.12.41.png/1758727078722","selfLink":"http://127.0.0.1:9199/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png","mediaLink":"http://127.0.0.1:9199/download/storage/v1/b/demo-chat.appspot.com/o/avatars%2Fg.lanzi%40addiction.it%2FSimulator%20Screenshot%20-%20iPad%20Air%2013-inch%20(M3)%20-%202025-09-19%20at%2010.12.41.png?generation=1758727078722&alt=media"}}
[debug] [2025-09-24T15:17:58.730Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast 200
[debug] [2025-09-24T15:17:58.730Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/demo-chat/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2025-09-24T15:18:00.939Z] Sep 24, 2025 5:18:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:00.948Z] Sep 24, 2025 5:18:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:00.952Z] Sep 24, 2025 5:18:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:06.296Z] Sep 24, 2025 5:18:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:06.300Z] Sep 24, 2025 5:18:06 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:06 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:18:11.139Z] Sep 24, 2025 5:18:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:11.148Z] Sep 24, 2025 5:18:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:11.157Z] Sep 24, 2025 5:18:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:11 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:12.258Z] Sep 24, 2025 5:18:12 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:12 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:37.091Z] Sep 24, 2025 5:18:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:37.098Z] Sep 24, 2025 5:18:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:37.103Z] Sep 24, 2025 5:18:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:46.851Z] Sep 24, 2025 5:18:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:46.858Z] Sep 24, 2025 5:18:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:46.862Z] Sep 24, 2025 5:18:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:59.077Z] Sep 24, 2025 5:18:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:18:59.084Z] Sep 24, 2025 5:18:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:18:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:19:03.586Z] Sep 24, 2025 5:19:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:19:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:19:06.225Z] Sep 24, 2025 5:19:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:19:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:19:06.232Z] Sep 24, 2025 5:19:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:19:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:19:06.237Z] Sep 24, 2025 5:19:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:19:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:19:33.599Z] Sep 24, 2025 5:19:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:19:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:20:03.605Z] Sep 24, 2025 5:20:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:20:03 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:20:04.595Z] Sep 24, 2025 5:20:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:20:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:20:04.598Z] Sep 24, 2025 5:20:04 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:20:04 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:20:06.246Z] Sep 24, 2025 5:20:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:20:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:20:06.251Z] Sep 24, 2025 5:20:06 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:20:06 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:20:25.486Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:20:25.486Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      // L'utente può creare, aggiornare o cancellare un documento se il suo UID corrisponde al `userId` del documento\n      allow write: if request.auth != null && request.auth.uid == userId;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:20:25.487Z] Sep 24, 2025 5:20:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:20:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:20:25.493Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:20:25.493Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[debug] [2025-09-24T15:21:19.593Z] Sep 24, 2025 5:21:19 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:21:19 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:21:55.605Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:21:55.605Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      // L'utente può creare, aggiornare o cancellare un documento se il suo UID corrisponde al `userId` del documento\n      allow write: if request.auth != null && request.auth.uid == userId;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:21:55.606Z] Sep 24, 2025 5:21:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:21:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:21:55.615Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:21:55.615Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[debug] [2025-09-24T15:22:05.584Z] Sep 24, 2025 5:22:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:22:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:23:05.597Z] Sep 24, 2025 5:23:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:23:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:23:51.587Z] Sep 24, 2025 5:23:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:23:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:24:22.915Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:24:22.915Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      // L'utente può aggiornare un documento se il suo UID corrisponde al `userId` del documento\n      // O se la sua email corrisponde al `userId` del documento (che è l'email)\n      allow update: if request.auth != null &&\n                      (request.auth.uid == userId || request.auth.token.email == userId);\n      allow delete: if request.auth != null && request.auth.uid == userId;\n      allow create: if request.auth != null;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:24:22.916Z] Sep 24, 2025 5:24:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:24:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:24:22.924Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:24:22.924Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[debug] [2025-09-24T15:24:33.624Z] Sep 24, 2025 5:24:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:24:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:24:33.631Z] Sep 24, 2025 5:24:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:24:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:24:33.636Z] Sep 24, 2025 5:24:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:24:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:24:51.605Z] Sep 24, 2025 5:24:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:24:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:25:33.644Z] Sep 24, 2025 5:25:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:25:33 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:25:33.650Z] Sep 24, 2025 5:25:33 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:25:33 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-09-24T15:25:51.619Z] Sep 24, 2025 5:25:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:25:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:26:37.586Z] Sep 24, 2025 5:26:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:26:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:26:38.617Z] Sep 24, 2025 5:26:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:26:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:26:38.624Z] Sep 24, 2025 5:26:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:26:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:26:38.629Z] Sep 24, 2025 5:26:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:26:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:26:45.443Z] Sep 24, 2025 5:26:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:26:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:26:45.467Z] Sep 24, 2025 5:26:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:26:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:27:02.423Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:27:02.423Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      // L'utente può aggiornare un documento se il suo UID corrisponde al `userId` del documento\n      // O se la sua email corrisponde al `userId` del documento (che è l'email)\n      allow update: if request.auth != null &&\n                      (request.auth.uid == userId || request.auth.token.email == userId);\n      allow delete: if request.auth != null && request.auth.uid == userId;\n      allow create: if request.auth != null;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n\n    // Regole per i post\n    match /posts/{postId} {\n      allow read: if request.auth != null;\n      allow create: if request.auth != null && request.resource.data.author.email == request.auth.token.email;\n      allow update, delete: if request.auth != null && resource.data.author.email == request.auth.token.email;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:27:02.424Z] Sep 24, 2025 5:27:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:27:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:27:02.446Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:27:02.446Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-09-24T15:27:15.346Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules [none]
[debug] [2025-09-24T15:27:15.346Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    // Gli utenti possono leggere i dati degli altri utenti, ma modificare solo i propri\n    match /users/{userId} {\n      allow read: if request.auth != null;\n      // L'utente può aggiornare un documento se il suo UID corrisponde al `userId` del documento\n      // O se la sua email corrisponde al `userId` del documento (che è l'email)\n      allow update: if request.auth != null &&\n                      (request.auth.uid == userId || request.auth.token.email == userId);\n      allow delete: if request.auth != null && request.auth.uid == userId;\n      allow create: if request.auth != null;\n    }\n\n    // Chiunque sia autenticato può leggere i messaggi\n    match /messages/{messageId} {\n      allow read, write: if request.auth != null;\n    }\n\n    // Regole per i post\n    match /posts/{postId} {\n      allow read: if request.auth != null;\n      allow create: if request.auth != null && request.resource.data.author.email == request.auth.token.email;\n      allow update, delete: if request.auth != null && resource.data.author.email == request.auth.token.email;\n    }\n  }\n}\n"}]}}
[debug] [2025-09-24T15:27:15.348Z] Sep 24, 2025 5:27:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:27:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:27:15.372Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules 200
[debug] [2025-09-24T15:27:15.372Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/demo-chat:securityRules {}
[info] ✔  firestore: Rules updated. 
[debug] [2025-09-24T15:27:30.947Z] Sep 24, 2025 5:27:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:27:30 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:27:31.131Z] Sep 24, 2025 5:27:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:27:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:27:31.147Z] Sep 24, 2025 5:27:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:27:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:27:31.153Z] Sep 24, 2025 5:27:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:27:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:27:31.193Z] Sep 24, 2025 5:27:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:27:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:27:37.600Z] Sep 24, 2025 5:27:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:27:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:14.809Z] Sep 24, 2025 5:28:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:14.816Z] Sep 24, 2025 5:28:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:14.821Z] Sep 24, 2025 5:28:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:14.861Z] Sep 24, 2025 5:28:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:20.081Z] Sep 24, 2025 5:28:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:20.091Z] Sep 24, 2025 5:28:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:20.095Z] Sep 24, 2025 5:28:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:25.362Z] Sep 24, 2025 5:28:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:25.562Z] Sep 24, 2025 5:28:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:25.568Z] Sep 24, 2025 5:28:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:25.573Z] Sep 24, 2025 5:28:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:25.613Z] Sep 24, 2025 5:28:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:37.618Z] Sep 24, 2025 5:28:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:47.425Z] Sep 24, 2025 5:28:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Sep 24, 2025 5:28:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nSep 24, 2025 5:28:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:47.428Z] Sep 24, 2025 5:28:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:50.386Z] Sep 24, 2025 5:28:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:50.446Z] Sep 24, 2025 5:28:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:28:51.580Z] Sep 24, 2025 5:28:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:28:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-09-24T15:29:25.628Z] Sep 24, 2025 5:29:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Sep 24, 2025 5:29:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
